/* ==========================================================================
   Legend / Filter-Bar (Chips)

   Zweck:
   - Filterleiste für Modul-Kategorien (BWL, WI, Info, …) + “Alle”
   - Jeder Chip ist ein Button (.legend-item) mit Kategorieklasse (.legend-bwl, …)
   - Aktiv-Zustand: .is-active (mehrere aktiv möglich)

   JS/HTML-Vertrag (implizit):
   - Container: .legend-filter
   - Label: .legend-label
   - Chip/Button: .legend-item + Kategorieklasse (legend-bwl, legend-wi, …)
   - Aktiv: .legend-item.is-active
   - Optional: Module werden im Curriculum gedimmt über .module.is-dimmed
   ========================================================================== */


/* ===========================
   FILTER BAR CONTAINER
   =========================== */

/* Container der Legende – Tabs-ähnlicher “Panel”-Look */
.legend-filter{
  display: inline-flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.4rem;

  padding: 0.4rem 0.8rem;
  margin: 1.4rem 0 1.2rem;

  border-radius: 999px;

  /* Finaler Look über Tokens  */
  background: var(--panel-strong);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  color: var(--text);

  backdrop-filter: blur(14px);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}


/* ===========================
   LABEL
   =========================== */

.legend-filter .legend-label{
  font-size: 0.78rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;

  color: #e5e7eb;
  opacity: 0.8;

  white-space: nowrap;
}

/* Light Mode: Label braucht Kontrast, Chips bleiben farbig genug */
:root[data-theme="light"] .legend-filter .legend-label{
  color: var(--text);
  opacity: 0.85;
}


/* ===========================
   FILTER CHIPS (Buttons)
   =========================== */

/* Grundstil für alle Filter-Chips */
.legend-filter .legend-item{
  border: none;
  border-radius: 999px;

  padding: 0.28rem 0.85rem;
  font-size: 0.8rem;
  font-weight: 600;

  cursor: pointer;

  display: inline-flex;
  align-items: center;
  gap: 0.3rem;

  white-space: nowrap;

  color: #111; /* Default-Textfarbe; bei dunklen Chips (egov) überschrieben */
  box-shadow: 0 3px 8px rgba(15, 23, 42, 0.35);

  transform: translateY(0) scale(0.98);
  opacity: 0.9;

  transition:
    transform 0.15s ease,
    box-shadow 0.15s ease,
    filter 0.15s ease,
    opacity 0.15s ease;
}

/* Hover */
.legend-filter .legend-item:hover{
  transform: translateY(-1px) scale(1);
  opacity: 1;
}

/* Aktive Filter (mehrere möglich) */
.legend-filter .legend-item.is-active{
  transform: translateY(-1px) scale(1.03);
  opacity: 1;

  box-shadow:
    0 0 0 2px rgba(248, 250, 252, 0.9),
    0 12px 26px rgba(15, 23, 42, 0.55);

  filter: brightness(1.05) saturate(1.06);
}

/* Inaktive Filter leicht zurücknehmen */
.legend-filter .legend-item:not(.is-active){
  opacity: 0.85;
}


/* ===========================
   CATEGORY COLORS (wie Module)
   =========================== */

.legend-filter .legend-bwl{ background: #f44b75; }
.legend-filter .legend-wi{ background: #f6921e; }
.legend-filter .legend-info{ background: #8dd3ce; }

.legend-filter .legend-wi-info{
  background: linear-gradient(to right, #8dd3ce 50%, #f6921e 50%);
}

.legend-filter .legend-math{ background: #d86a95; }
.legend-filter .legend-qual{ background: #b4c530; }

/* eGov (dunkel) → Text weiß für Kontrast */
.legend-filter .legend-egov{
  background: #555;
  color: #fff;
}

/* “Alle anzeigen” neutral */
.legend-filter .legend-all{
  background: #e0e0e0;
  color: #000;
}


/* ===========================
   OPTIONAL: DIMMEN VON MODULEN
   =========================== */

/* Nur Module werden ausgegraut – Filter-Chips bleiben interaktiv/bunt */
.curriculum .module.is-dimmed{
  opacity: 0.25;
  filter: grayscale(1);
  pointer-events: none;
}


/* ===========================
   BUBBLE / BADGE (kleiner Punkt links)
   =========================== */

/* Bubble ist rein dekorativ (zusätzlicher Hinweis), nicht die primäre Farbquelle */
.legend-filter .legend-item::before{
  content: "";
  width: 10px;
  height: 10px;

  border-radius: 50%;
  display: inline-block;
  margin-right: 6px;

  transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
}

/* Bubble wird beim Hover/Aktiv größer */
.legend-filter .legend-item:hover::before,
.legend-filter .legend-item.is-active::before{
  transform: scale(1.25);
  box-shadow: 0 0 6px rgba(255,255,255,0.5);
}


/* ===========================
   Bubble Colors je Kategorie
   =========================== */

.legend-filter .legend-bwl::before{ background: #f44b75; }
.legend-filter .legend-wi::before{ background: #f6921e; }
.legend-filter .legend-info::before{ background: #8dd3ce; }

.legend-filter .legend-wi-info::before{
  background: linear-gradient(to right, #8dd3ce 50%, #f6921e 50%);
}

.legend-filter .legend-math::before{ background: #d86a95; }
.legend-filter .legend-qual::before{ background: #b4c530; }
.legend-filter .legend-egov::before{ background: #555; }
.legend-filter .legend-all::before{ background: #ccc; }

/* ===========================
   MOBILE
   =========================== */

@media (max-width: 720px){

  /* Container weniger “dominant”, eher wie eine Toolbar */
  .legend-filter{
    width: 100%;
    border-radius: 14px;
    padding: .45rem .6rem;
    margin: .9rem 0 .8rem;


    /* eine Zeile + horizontal scroll */
    flex-wrap: nowrap;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;

    /* weniger Glow/Schwere */
    box-shadow: none;
    backdrop-filter: blur(10px);
  }
  .legend-filter::-webkit-scrollbar{ display: none; }

  .legend-filter .legend-label{
    flex: 0 0 auto;
    font-size: .72rem;
    letter-spacing: .06em;
    opacity: .85;
    margin-right: .25rem;
  }

  /* Chips kompakter + weniger Shadow */
  .legend-filter .legend-item{
    flex: 0 0 auto;
    padding: .22rem .65rem;
    font-size: .78rem;
    box-shadow: none;
    opacity: .96;
    transform: none;           /* kein “Bouncy” auf Mobile */
  }

  .legend-filter .legend-item:hover{
    transform: none;
  }

  /* Active: klar, aber nicht riesig */
  .legend-filter .legend-item.is-active{
    box-shadow: 0 0 0 2px rgba(248,250,252,.85);
    filter: none;
  }

  /* Bubble kleiner */
  .legend-filter .legend-item::before{
    width: 8px;
    height: 8px;
    margin-right: 5px;
  }
}
